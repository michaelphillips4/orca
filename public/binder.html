<!DOCTYPE html>

<html>
  <head>
    <title>Orca</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="orca.min.css" />
    
    <style>
      .rl {
        padding-top: 5px;
        padding-right: 5px;
      }
      .copy-button {
        float: right;
      }
    </style>

  </head>
  <body>
    <main>
      <heading class="center">
        <h1>Orca</h1>
        <nav>
             <a href="/">home</a> ||
          <a href="helpers.html">helpers</a> ||
          <a href="binder.html">binding</a>
        </nav>
      </heading>

      <p>
        This Binder class is a way of implementing two-way data
        binding in JavaScript. It works by syncing a central model object with
        elements in the DOM via custom data-bind and data-display attributes and
        handling template strings like <i>{{ key }}</i
        >. Here's a breakdown of its functionality and usage:
      </p>

      <h3>Key Features</h3>
      <h4>Two-Way Data Binding:</h4>
      <p>
        DOM elements with data-bind attributes
        <i>&lt;input data-bind="name"&gt;</i> update the model when they
        change. When the model is updated programmatically, the DOM elements
        reflect the changes.
      </p>
      <h4>Event Handling:</h4>
      <p>
        Different input types (e.g., text, checkbox, radio, range) are handled
        correctly. Supports grouped checkboxes for multi-value bindings.
      </p>
      <h4>Template Binding:</h4>
      <p>
        Dynamically updates text nodes containing <i>{{ key }}</i> with
        the corresponding model value. Callbacks: Allows registering callbacks
        for specific fields (onFieldChanged) or any field changes
        (onAnyFieldChanged).
      </p>
     

      <div id="app">
        <h2>Form Elements</h2>
        <p>Type into the form elements below and see the bound value in the table underneath.

        </p>
        <div class="row">
          <div class="col-4">
            <label for="text">input type = text</label>
            <input type="text" data-bind="textInput" />

            <label for="tel">input type = tel</label>
            <input type="tel" data-bind="telInput" />

            <label for="email">input type = email</label>
            <input type="email" data-bind="emailInput" />

            <label for="url">input type = url</label>
            <input type="url" data-bind="urlInput" />

            <label for="password">input type = password</label>
            <input type="password" data-bind="passwordInput" />

            <label for="number">input type = number</label>
            <input type="number" data-bind="numberInput" />
          </div>

          <div class="col-4">
            <label for="date">input type = date</label>
            <input type="date"  data-bind="dateInput" />

            <label for="datetime-local">input type = datetime-local</label>
            <input
              type="datetime-local"
              data-bind="datetimelocalInput"
            />

            <label for="month">input type = month</label>
            <input type="month"  data-bind="monthInput" />

            <label for="time">input type = time</label>
            <input type="time"  data-bind="timeInput" />

            <label for="select">select</label>
            <select id="select" data-bind="select">
              <option>item one</option>
              <option>item two</option>
              <option>item three</option>
            </select>
          </div>

          <div class="col-4">
            <label for="checkbox">input type = checkbox</label>

            <input type="checkbox" id="checkbox" data-bind="checkbox" />

            <label for="radio">input type = radio</label>
            <div class="row">
              <div class="rl">a</div>
              <div>
                <input
                  id="radio1"
                  type="radio"
                  name="radio"
                  value="a"
                  data-bind="radio"
                />
              </div>
              <div class="rl">b</div>
              <div>
                <input type="radio" name="radio" value="b" data-bind="radio" />
              </div>
              <div class="rl">c</div>
              <div>
                <input type="radio" name="radio" value="c" data-bind="radio" />
              </div>
            </div>

            <label for="range">input type = range</label>
            <input type="range" id="range" data-bind="range" />

            <label for="reset">input type = reset</label>
            <input type="reset" id="reset" />

            <label for="textarea">textarea</label><br />
            <textarea rows="5" id="textarea" data-bind="textarea"></textarea>
          </div>
        </div>

        <table>
          <tr>
            <th>binding name</th>
            <th>value</th>
            <th>other</th>
          </tr>
          <tr>
            <td>text</td>
            <td>{{ textInput}}</td>
            <td>{{ total }}</td>
          </tr>
          <tr>
            <td>tel</td>
            <td>{{ telInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>email</td>
            <td>{{ emailInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>url</td>
            <td>{{ urlInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>password-input</td>
            <td>{{ passwordInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>number</td>
            <td>{{ numberInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>date</td>
            <td>{{ dateInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>datetime-local</td>
            <td>{{ datetimelocalInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>month</td>
            <td>{{ monthInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>time</td>
            <td>{{ timeInput }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>select</td>
            <td>{{ select }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>checkbox</td>
            <td>{{ checkbox }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>radio</td>
            <td>{{ radio }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>range</td>
            <td>{{ range }}</td>
            <td>0</td>
          </tr>
          <tr>
            <td>textarea</td>
            <td>{{ textarea }}</td>
            <td>0</td>
          </tr>
        </table>
      </div>
    
      <h2>Example</h2>
      <code>
        <x id="example">
&lt;script&gt;  <br />   
      
// Initialize the Binder with the app element
<br />        
const binder = new Binder('#app')
<br /> <br />     
// set initial values if required
<br />        
binder.updateModel('total', 0)<br />   
binder.updateModel('textarea','this is a text binding in the textarea')
<br />  <br />    
// Set up callbacks for specific fields
<br />  <br />    
// on field changed event by field name
<br />    
binder.onFieldChanged('text-input', newValue => {<br />   
    console.log(`text-input changed to: ${newValue}`)<br />   
})<br />   <br />   

// on any field change<br />   
       
binder.onAnyFieldChanged((key, value) => {<br />   
     binder.model['total'] = binder.model['total'] + 1<br />   
     console.log(`Model updated - ${key}: ${value}`)<br />   
})<br />   

&lt;script/&gt;<br />   

</x>
        <button
          class="copy-button"
          onclick="navigator.clipboard.writeText(document.getElementById('example').innerText)"
        >
          copy
        </button>
 </code><script src="orca.js"></script>
      <script src="orca.binder.js"></script>
        <!-- <div id="app2">
        <select data-bind="test">
          <option>1</option>
          <option>2</option>
          <option>3</option>
        </select>
        <div>{{test}}</div>
        </div> -->

<!-- <script>
  const b2 = new Binder("#app2");
  b2.onAnyFieldChanged((key, value) => {
          
          console.log(`Model updated - ${key}: ${value}`)
        })
</script> -->

     
      
      
      
      <script>
        // Initialize the Binder with the app element
        const binder = new Binder('#app')

        // set initial values if required
        binder.updateModel('total', 0)
        binder.updateModel('textarea', 'this is a text binding in the textarea')

        //  Set up callbacks for specific fields

        // on field changed event by field name
        binder.onFieldChanged('text', newValue => {
          console.log(`text changed to: ${newValue}`)
        })

        // on any field change
        binder.onAnyFieldChanged((key, value) => {
          binder.model['total'] = binder.model['total'] + 1
          console.log(`Model updated - ${key}: ${value}`)
        })
      </script>
    </main>
    <footer class="center">v1 by Michael Phillips <a href="http:\\www.area2.co.uk">Home</a></footer>
 
  </body>
</html>
